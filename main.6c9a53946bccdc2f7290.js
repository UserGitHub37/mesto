!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._messageErrorClass=e.messageErrorClass,this._formElement=n,this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector))}var n,r;return n=t,(r=[{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._messageErrorClass),t.textContent=""}},{key:"resetErrors",value:function(){var e=this;this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"_showInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._messageErrorClass)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"disableButton",value:function(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.setAttribute("disabled","true")}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this.disableButton():(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.removeAttribute("disabled"))}},{key:"enableValidation",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){var r=t.cardData,o=t.userId,i=t.handleCardClick,a=t.handleLikeClick,c=t.handleDeleteIconClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=r.name,this._link=r.link,this._cardLikes=r.likes,this._ownerId=r.owner._id,this._handleCardClick=i,this._handleLikeClick=a,this._handleDeleteIconClick=c,this._templateSelector=n,this.cardId=r._id,this._userId=o}var t,r;return t=e,(r=[{key:"_hasMyLike",value:function(){var e=this;return this._cardLikes.find((function(t){return t._id==e._userId}))}},{key:"_setLike",value:function(e){e?this._cardHeart.classList.add("card__heart_active"):this._cardHeart.classList.remove("card__heart_active")}},{key:"updateLike",value:function(e){this._cardLikes=e,this._numberOfLikes=e.length,this._cardLikeCounter.textContent=this._numberOfLikes,this._hasMyLike()?this._setLike(!0):this._setLike(!1)}},{key:"createCard",value:function(){var e=this;this.cardElement=document.querySelector(this._templateSelector).content.firstElementChild.cloneNode(!0);var t=this.cardElement.querySelector(".card__remove-button");return this._cardTitle=this.cardElement.querySelector(".card__title"),this._cardImage=this.cardElement.querySelector(".card__image"),this._cardHeart=this.cardElement.querySelector(".card__heart"),this._cardLikeCounter=this.cardElement.querySelector(".card__like-counter"),this._cardTitle.textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=this._name,this.updateLike(this._cardLikes),this._ownerId==this._userId?t.addEventListener("click",(function(){return e._handleDeleteIconClick(e)})):t.remove(),this._cardImage.addEventListener("click",(function(){return e._handleCardClick(e._name,e._link)})),this._cardHeart.addEventListener("click",(function(t){e._handleLikeClick(e,t.target.classList.contains("card__heart_active"))})),this.cardElement}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initialItems=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"rendererItem",value:function(e){return this._renderer(e)}},{key:"renderInitialItems",value:function(){var e=this,t=[];return this._initialItems.forEach((function(n){return t.push(e._renderer(n))})),t}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupSelector=t,this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){document.removeEventListener("keydown",this._handleEscClose),this._popupElement.classList.remove("popup_opened")}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("click",(function(t){t.target.classList.contains("popup__close-button")&&e.close()})),this._popupElement.addEventListener("mousedown",(function(t){t.target.classList.contains("popup")&&e.close()}))}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=f(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},l.apply(this,arguments)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function h(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(r);if(o){var n=d(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._enlargedImage=t._popupElement.querySelector(".popup__enlarged-image"),t._imagePopupTitle=t._popupElement.querySelector(".popup__title_type_image"),t}return t=a,(n=[{key:"open",value:function(e,t){this._enlargedImage.src=t,this._enlargedImage.alt=e,this._imagePopupTitle.textContent=e,l(d(a.prototype),"open",this).call(this)}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(c);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=b(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},v.apply(this,arguments)}function b(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}function E(e,t){return E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},E(e,t)}function g(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=k(r);if(o){var n=k(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return g(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._submitHandlerForm=t,n._inputList=Array.from(n._popupElement.querySelectorAll(".popup__input")),n._formElement=n._popupElement.querySelector(".popup__form"),n._submitButton=n._formElement.querySelector(".popup__submit-button"),n._initialSubmitButtonText=n._submitButton.textContent,n}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputValues={},this._inputList.forEach((function(t){return e._inputValues[t.name]=t.value})),this._inputValues}},{key:"setEventListeners",value:function(){var e=this;v(k(a.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){e._submitHandlerForm(t,e._getInputValues())}))}},{key:"renderLoading",value:function(e){this._submitButton.textContent=e?"Сохранение...":this._initialSubmitButtonText}},{key:"close",value:function(){this._formElement.reset(),v(k(a.prototype),"close",this).call(this)}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(c);function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L=function(){function e(t){var n=t.nameSelector,r=t.infoSelector,o=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameElement=document.querySelector(n),this._infoElement=document.querySelector(r),this._avatarElement=document.querySelector(o)}var t,n;return t=e,(n=[{key:"getUserId",value:function(){return this._userId}},{key:"setUserId",value:function(e){this._userId=e}},{key:"setUserAvatar",value:function(e){this._avatarElement.src=e}},{key:"getUserInfo",value:function(){return{name:this._nameElement.textContent,info:this._infoElement.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;this._nameElement.textContent=t,this._infoElement.textContent=n}}])&&S(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),C={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_disabled",inputErrorClass:"popup__input_type_error",messageErrorClass:"popup__error-message_visible"},O=document.querySelector(".profile"),I=O.querySelector(".profile__image-edit-button"),P=O.querySelector(".profile__edit-button"),j=O.querySelector(".profile__add-button"),T=document.querySelector(".popup_profile").querySelector(".popup__form"),q=T.querySelector(".popup__input_field_name-profile"),B=T.querySelector(".popup__input_field_about-profile");function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(){return A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=x(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},A.apply(this,arguments)}function x(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=H(e)););return e}function D(e,t){return D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},D(e,t)}function F(e,t){if(t&&("object"===U(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function H(e){return H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},H(e)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=H(r);if(o){var n=H(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return F(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._submitHandlerForm=t,n._submitButtonElement=n._popupElement.querySelector(".popup__submit-button"),n}return t=a,(n=[{key:"setEventListeners",value:function(){var e=this;this._submitButtonElement.addEventListener("click",(function(t){e._submitHandlerForm(t,e._confirmationData)})),A(H(a.prototype),"setEventListeners",this).call(this)}},{key:"open",value:function(e){A(H(a.prototype),"open",this).call(this),this._confirmationData=e}}])&&R(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(c);function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var J=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers}var t,n;return t=e,(n=[{key:"_checkPromise",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"users/me"),{method:"GET",headers:this._headers}).then(this._checkPromise)}},{key:"changeUserInfo",value:function(e){return fetch("".concat(this._baseUrl,"users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._checkPromise)}},{key:"changeAvatar",value:function(e){return fetch("".concat(this._baseUrl,"users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._checkPromise)}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"cards"),{method:"GET",headers:this._headers}).then(this._checkPromise)}},{key:"setLike",value:function(e){return fetch("".concat(this._baseUrl,"cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then(this._checkPromise)}},{key:"removeLike",value:function(e){return fetch("".concat(this._baseUrl,"cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then(this._checkPromise)}},{key:"addCard",value:function(e){return fetch("".concat(this._baseUrl,"cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._checkPromise)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkPromise)}}])&&N(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-41/",headers:{authorization:"7a2dc15d-d1bf-4fc7-a20c-343b3e4fd575","Content-Type":"application/json"}}),G=new L({nameSelector:".profile__name",infoSelector:".profile__info",avatarSelector:".profile__image"}),z=new w(".popup_image-profile",(function(e,t){var n=t.profileImageLink;e.preventDefault(),z.renderLoading(!0),J.changeAvatar({avatar:n}).then((function(e){G.setUserAvatar(e.avatar),z.close()})).catch((function(e){return console.log(e)})).finally((function(){z.renderLoading(!1)}))})),$=new w(".popup_profile",(function(e,t){var n=t.userName,r=t.aboutUser;e.preventDefault(),$.renderLoading(!0),J.changeUserInfo({name:n,about:r}).then((function(e){var t=e.name,n=e.about;G.setUserInfo({name:t,about:n}),$.close()})).catch((function(e){return console.log(e)})).finally((function(){$.renderLoading(!1)}))})),K=new y(".popup_image"),Q=new V(".popup_confirmation",(function(e,t){e.preventDefault(),J.deleteCard(t.cardId).then((function(){t.cardElement.remove(),t.cardElement=null,Q.close()})).catch((function(e){return console.log(e)}))})),W=Array.from(document.querySelectorAll(C.formSelector)),X={};function Y(e){return new r({cardData:e,userId:G.getUserId(),handleCardClick:ee,handleLikeClick:te,handleDeleteIconClick:Z},".card-template")}function Z(e){Q.open(e)}function ee(e,t){K.open(e,t)}function te(e,t){(t?J.removeLike(e.cardId):J.setLike(e.cardId)).then((function(t){e.updateLike(t.likes)})).catch((function(e){return console.log(e)}))}z.setEventListeners(),$.setEventListeners(),K.setEventListeners(),Q.setEventListeners(),Promise.all([J.getUserInfo(),J.getInitialCards()]).then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(t,n)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],a=r[1];return G.setUserAvatar(o.avatar),G.setUserId(o._id),G.setUserInfo({name:o.name,about:o.about}),new i({items:a,renderer:Y},".elements__wrapper")})).then((function(e){var t=new w(".popup_place",(function(n,r){var o=r.placeName,i=r.placeImageLink;n.preventDefault(),t.renderLoading(!0),J.addCard({name:o,link:i}).then((function(n){var r=e.rendererItem(n);e.addItem(r.createCard()),t.close()})).catch((function(e){return console.log(e)})).finally((function(){t.renderLoading(!1),X.popupFormPlace.disableButton()}))}));t.setEventListeners(),e.renderInitialItems().forEach((function(t){e.addItem(t.createCard())})),j.addEventListener("click",(function(){X.popupFormPlace.disableButton(),X.popupFormPlace.resetErrors(),t.open()}))})).catch((function(e){return console.log(e)})),P.addEventListener("click",(function(){X.popupFormProfile.disableButton();var e=G.getUserInfo();q.value=e.name,B.value=e.info,X.popupFormProfile.resetErrors(),$.open()})),I.addEventListener("click",(function(){X.popupFormProfileImage.disableButton(),X.popupFormProfileImage.resetErrors(),z.open()})),W.forEach((function(e){var n=new t(C,e);X[e.name]=n,n.enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SyxHQUM1Q1UsRUFBaUJNLFFBQVFoQixFQUFLaUIsaUJBR2hDeEUsRUFBZTlGLGlCQUFpQixTQTNCaEMsV0FDRWtKLEVBQWVxQixlQUFlekssZ0JBQzlCb0osRUFBZXFCLGVBQWVFLGNBQzlCVCxFQUFtQlosYUEyQnRCaEIsT0FBTSxTQUFBQyxHQUFHLE9BQUlDLFFBQVFDLElBQUlGLE1BRzVCeEMsRUFBa0I3RixpQkFBaUIsU0EvSG5DLFdBQ0VrSixFQUFld0IsaUJBQWlCNUssZ0JBQ2hDLElBQU02SyxFQUFXL0MsRUFBUzhCLGNBQzFCMUQsRUFBaUJsQixNQUFRNkYsRUFBU2hLLEtBQ2xDc0YsRUFBa0JuQixNQUFRNkYsRUFBU2xGLEtBQ25DeUQsRUFBZXdCLGlCQUFpQkQsY0FDaENoQyxFQUFxQlcsVUEwSHZCeEQsRUFBdUI1RixpQkFBaUIsU0F0SnhDLFdBQ0VrSixFQUFlMEIsc0JBQXNCOUssZ0JBQ3JDb0osRUFBZTBCLHNCQUFzQkgsY0FDckM1QyxFQUEwQnVCLFVBc0o1QkgsRUFBUzdKLFNBQVEsU0FBQzNCLEdBQ2hCLElBQU1vTixFQUFnQixJQUFJdE4sRUFBY0MsRUFBb0JDLEdBQzVEeUwsRUFBZXpMLEVBQVlrRCxNQUFRa0ssRUFDbkNBLEVBQWNDLHNCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL3ZhbGlkYXRpb25TZXR0aW5ncy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IodmFsaWRhdGlvblNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gdmFsaWRhdGlvblNldHRpbmdzLmZvcm1TZWxlY3RvcjtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSB2YWxpZGF0aW9uU2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gdmFsaWRhdGlvblNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHZhbGlkYXRpb25TZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gdmFsaWRhdGlvblNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX21lc3NhZ2VFcnJvckNsYXNzID0gdmFsaWRhdGlvblNldHRpbmdzLm1lc3NhZ2VFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX21lc3NhZ2VFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG4gIH1cclxuXHJcblxyXG4gIHJlc2V0RXJyb3JzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX21lc3NhZ2VFcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG5cclxuICBkaXNhYmxlQnV0dG9uICgpIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICd0cnVlJyk7XHJcbiAgfVxyXG5cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHtjYXJkRGF0YSwgdXNlcklkLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZUxpa2VDbGljaywgaGFuZGxlRGVsZXRlSWNvbkNsaWNrfSwgdGVtcGxhdGVTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fbmFtZSA9IGNhcmREYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gY2FyZERhdGEubGluaztcclxuICAgIHRoaXMuX2NhcmRMaWtlcyA9IGNhcmREYXRhLmxpa2VzO1xyXG4gICAgdGhpcy5fb3duZXJJZCA9IGNhcmREYXRhLm93bmVyLl9pZDtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUljb25DbGljayA9IGhhbmRsZURlbGV0ZUljb25DbGljaztcclxuICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xyXG4gICAgdGhpcy5jYXJkSWQgPSBjYXJkRGF0YS5faWQ7XHJcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XHJcblxyXG4gIH1cclxuXHJcbiAgX2hhc015TGlrZSgpIHtcclxuICAgIHJldHVybiB0aGlzLl9jYXJkTGlrZXMuZmluZChpdGVtID0+IGl0ZW0uX2lkID09IHRoaXMuX3VzZXJJZCk7XHJcbiAgfVxyXG5cclxuXHJcbiAgX3NldExpa2UgKGlzTGlrZSkge1xyXG4gICAgaWYgKGlzTGlrZSkge1xyXG4gICAgICB0aGlzLl9jYXJkSGVhcnQuY2xhc3NMaXN0LmFkZCgnY2FyZF9faGVhcnRfYWN0aXZlJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9jYXJkSGVhcnQuY2xhc3NMaXN0LnJlbW92ZSgnY2FyZF9faGVhcnRfYWN0aXZlJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgdXBkYXRlTGlrZSAoY2FyZExpa2VzKSB7XHJcbiAgICB0aGlzLl9jYXJkTGlrZXMgPSBjYXJkTGlrZXM7XHJcbiAgICB0aGlzLl9udW1iZXJPZkxpa2VzID0gY2FyZExpa2VzLmxlbmd0aDtcclxuICAgIHRoaXMuX2NhcmRMaWtlQ291bnRlci50ZXh0Q29udGVudCA9IHRoaXMuX251bWJlck9mTGlrZXM7XHJcblxyXG4gICAgaWYgKHRoaXMuX2hhc015TGlrZSgpKSB7XHJcbiAgICAgIHRoaXMuX3NldExpa2UodHJ1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zZXRMaWtlKGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG5cclxuXHJcbiAgY3JlYXRlQ2FyZCAoKSB7XHJcbiAgICB0aGlzLmNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGVTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgIGNvbnN0IGNhcmRSZW1vdmVCdXR0b24gPSB0aGlzLmNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19yZW1vdmUtYnV0dG9uJyk7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLmNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190aXRsZScpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKTtcclxuICAgIHRoaXMuX2NhcmRIZWFydCA9IHRoaXMuY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2hlYXJ0Jyk7XHJcbiAgICB0aGlzLl9jYXJkTGlrZUNvdW50ZXIgPSB0aGlzLmNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlLWNvdW50ZXInKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHRoaXMudXBkYXRlTGlrZSh0aGlzLl9jYXJkTGlrZXMpO1xyXG5cclxuICAgIGlmICh0aGlzLl9vd25lcklkID09IHRoaXMuX3VzZXJJZCkge1xyXG4gICAgICBjYXJkUmVtb3ZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlSWNvbkNsaWNrKHRoaXMpKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNhcmRSZW1vdmVCdXR0b24ucmVtb3ZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSGVhcnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayh0aGlzLCBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY2FyZF9faGVhcnRfYWN0aXZlJykpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3RvciAoe2l0ZW1zLCByZW5kZXJlcn0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pbml0aWFsSXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJlckl0ZW0oaXRlbSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySW5pdGlhbEl0ZW1zKCkge1xyXG4gICAgY29uc3QgaXRlbXMgPSBbXTtcclxuICAgIHRoaXMuX2luaXRpYWxJdGVtcy5mb3JFYWNoKGl0ZW0gPT4gaXRlbXMucHVzaCh0aGlzLl9yZW5kZXJlcihpdGVtKSkpO1xyXG4gICAgcmV0dXJuIGl0ZW1zO1xyXG4gIH1cclxuXHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3RvciAocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IgPSBwb3B1cFNlbGVjdG9yO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cblxuICBvcGVuICgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG5cbiAgY2xvc2UgKCkge1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xuICB9XG5cblxuICBfaGFuZGxlRXNjQ2xvc2UgKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cblxuICBzZXRFdmVudExpc3RlbmVycyAoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9fY2xvc2UtYnV0dG9uJykpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldnQpID0+IHtcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXAnKSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3RvciAocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2VubGFyZ2VkSW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19lbmxhcmdlZC1pbWFnZScpO1xuICAgIHRoaXMuX2ltYWdlUG9wdXBUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3RpdGxlX3R5cGVfaW1hZ2UnKTtcbiAgfVxuXG5cbiAgb3BlbiAobmFtZSwgbGluaykge1xuICAgIHRoaXMuX2VubGFyZ2VkSW1hZ2Uuc3JjID0gbGluaztcbiAgICB0aGlzLl9lbmxhcmdlZEltYWdlLmFsdCA9IG5hbWU7XG4gICAgdGhpcy5faW1hZ2VQb3B1cFRpdGxlLnRleHRDb250ZW50ID0gbmFtZTtcblxuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxuXG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IgKHBvcHVwU2VsZWN0b3IsIHN1Ym1pdEhhbmRsZXJGb3JtKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fc3VibWl0SGFuZGxlckZvcm0gPSBzdWJtaXRIYW5kbGVyRm9ybTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2lucHV0JykpO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc3VibWl0LWJ1dHRvbicpO1xuICAgIHRoaXMuX2luaXRpYWxTdWJtaXRCdXR0b25UZXh0ID0gdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xuICB9XG5cblxuICBfZ2V0SW5wdXRWYWx1ZXMgKCkge1xuICAgIHRoaXMuX2lucHV0VmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB0aGlzLl9pbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlKTtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRWYWx1ZXM7XG4gIH1cblxuXG4gIHNldEV2ZW50TGlzdGVuZXJzICgpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXJGb3JtKGV2dCwgdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgfSk7XG4gIH1cblxuICByZW5kZXJMb2FkaW5nIChpc0xvYWRpbmcpIHtcbiAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0aGlzLl9pbml0aWFsU3VibWl0QnV0dG9uVGV4dDtcbiAgICB9XG5cbiAgfVxuXG4gIGNsb3NlICgpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gIH1cblxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3RvciAoe25hbWVTZWxlY3RvciwgaW5mb1NlbGVjdG9yLCBhdmF0YXJTZWxlY3Rvcn0pIHtcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbmZvRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoaW5mb1NlbGVjdG9yKTtcbiAgICB0aGlzLl9hdmF0YXJFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XG4gIH1cblxuXG4gIGdldFVzZXJJZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fdXNlcklkO1xuICB9XG5cblxuICBzZXRVc2VySWQodXNlcklkKSB7XG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xuICB9XG5cblxuICBzZXRVc2VyQXZhdGFyKGxpbmspIHtcbiAgICB0aGlzLl9hdmF0YXJFbGVtZW50LnNyYyA9IGxpbms7XG4gIH1cblxuXG4gIGdldFVzZXJJbmZvICgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgICBpbmZvOiB0aGlzLl9pbmZvRWxlbWVudC50ZXh0Q29udGVudFxuICAgIH07XG4gIH1cblxuXG4gIHNldFVzZXJJbmZvICh7bmFtZSwgYWJvdXR9KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2luZm9FbGVtZW50LnRleHRDb250ZW50ID0gYWJvdXQ7XG4gIH1cblxufVxuIiwiZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25TZXR0aW5ncyA9IHtcclxuICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxyXG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fc3VibWl0LWJ1dHRvbicsXHJcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19zdWJtaXQtYnV0dG9uX2Rpc2FibGVkJyxcclxuICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXRfdHlwZV9lcnJvcicsXHJcbiAgbWVzc2FnZUVycm9yQ2xhc3M6ICdwb3B1cF9fZXJyb3ItbWVzc2FnZV92aXNpYmxlJ1xyXG59O1xyXG4iLCJjb25zdCBwcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGUnKTtcbmNvbnN0IHByb2ZpbGVJbWFnZUVkaXRCdXR0b24gPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19pbWFnZS1lZGl0LWJ1dHRvbicpO1xuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xuY29uc3QgcGxhY2VBZGRCdXR0b24gPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7XG5cbmNvbnN0IHByb2ZpbGVQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9wcm9maWxlJyk7XG5jb25zdCBwcm9maWxlRm9ybUVsZW1lbnQgPSBwcm9maWxlUG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XG5jb25zdCBwcm9maWxlTmFtZUlucHV0ID0gcHJvZmlsZUZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfZmllbGRfbmFtZS1wcm9maWxlJyk7XG5jb25zdCBwcm9maWxlQWJvdXRJbnB1dCA9IHByb2ZpbGVGb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X2ZpZWxkX2Fib3V0LXByb2ZpbGUnKTtcblxuXG5leHBvcnQgeyBwcm9maWxlSW1hZ2VFZGl0QnV0dG9uLCBwcm9maWxlRWRpdEJ1dHRvbiwgcGxhY2VBZGRCdXR0b24sIHByb2ZpbGVOYW1lSW5wdXQsIHByb2ZpbGVBYm91dElucHV0IH07XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3RvciAocG9wdXBTZWxlY3Rvciwgc3VibWl0SGFuZGxlckZvcm0pIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fc3VibWl0SGFuZGxlckZvcm0gPSBzdWJtaXRIYW5kbGVyRm9ybTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbkVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19zdWJtaXQtYnV0dG9uJyk7XHJcbiAgfVxyXG5cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMgKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgdGhpcy5fc3VibWl0SGFuZGxlckZvcm0oZXZ0LCB0aGlzLl9jb25maXJtYXRpb25EYXRhKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gIH1cclxuXHJcbiAgb3Blbihjb25maXJtYXRpb25EYXRhKSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB0aGlzLl9jb25maXJtYXRpb25EYXRhID0gY29uZmlybWF0aW9uRGF0YTtcclxuICB9XHJcblxyXG59XHJcbiIsImltcG9ydCAnLi9pbmRleC5jc3MnO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcbmltcG9ydCBDYXJkIGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcyc7XG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcbmltcG9ydCB7IHZhbGlkYXRpb25TZXR0aW5ncyB9IGZyb20gJy4uL3V0aWxzL3ZhbGlkYXRpb25TZXR0aW5ncy5qcyc7XG5cbmltcG9ydCB7XG4gIHByb2ZpbGVJbWFnZUVkaXRCdXR0b24sXG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxuICBwbGFjZUFkZEJ1dHRvbixcbiAgcHJvZmlsZU5hbWVJbnB1dCxcbiAgcHJvZmlsZUFib3V0SW5wdXRcbn0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcblxuaW1wb3J0IFBvcHVwV2l0aENvbmZpcm1hdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyc7XG5pbXBvcnQgQXBpIGZyb20gJy4uL2NvbXBvbmVudHMvQXBpLmpzJztcblxuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNDEvJyxcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246ICc3YTJkYzE1ZC1kMWJmLTRmYzctYTIwYy0zNDNiM2U0ZmQ1NzUnLFxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gIH1cbn0pO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3RvcjogJy5wcm9maWxlX19uYW1lJyxcbiAgaW5mb1NlbGVjdG9yOiAnLnByb2ZpbGVfX2luZm8nLFxuICBhdmF0YXJTZWxlY3RvcjogJy5wcm9maWxlX19pbWFnZSdcbn0pO1xuXG5jb25zdCBwb3B1cFdpdGhQcm9maWxlSW1hZ2VGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF9pbWFnZS1wcm9maWxlJywgc3VibWl0SGFuZGxlclByb2ZpbGVJbWFnZUZvcm0pO1xuY29uc3QgcG9wdXBXaXRoUHJvZmlsZUZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX3Byb2ZpbGUnLCBzdWJtaXRIYW5kbGVyUHJvZmlsZUZvcm0pO1xuY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJy5wb3B1cF9pbWFnZScpO1xuY29uc3QgcG9wdXBXaXRoRGVsZXRlQ2FyZCA9IG5ldyBQb3B1cFdpdGhDb25maXJtYXRpb24oJy5wb3B1cF9jb25maXJtYXRpb24nLCBzdWJtaXRIYW5kbGVyRGVsZXRlQ2FyZCk7XG5cbmNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHZhbGlkYXRpb25TZXR0aW5ncy5mb3JtU2VsZWN0b3IpKTtcbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XG5cblxuZnVuY3Rpb24gb3BlblBvcHVwUHJvZmlsZUltYWdlICgpIHtcbiAgZm9ybVZhbGlkYXRvcnMucG9wdXBGb3JtUHJvZmlsZUltYWdlLmRpc2FibGVCdXR0b24oKTtcbiAgZm9ybVZhbGlkYXRvcnMucG9wdXBGb3JtUHJvZmlsZUltYWdlLnJlc2V0RXJyb3JzKCk7XG4gIHBvcHVwV2l0aFByb2ZpbGVJbWFnZUZvcm0ub3BlbigpO1xufVxuXG5cbmZ1bmN0aW9uIHN1Ym1pdEhhbmRsZXJQcm9maWxlSW1hZ2VGb3JtIChldnQsIHtwcm9maWxlSW1hZ2VMaW5rfSkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgcG9wdXBXaXRoUHJvZmlsZUltYWdlRm9ybS5yZW5kZXJMb2FkaW5nKHRydWUpO1xuICBhcGkuY2hhbmdlQXZhdGFyKHthdmF0YXI6IHByb2ZpbGVJbWFnZUxpbmt9KVxuICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgdXNlckluZm8uc2V0VXNlckF2YXRhcihkYXRhLmF2YXRhcik7XG4gICAgICBwb3B1cFdpdGhQcm9maWxlSW1hZ2VGb3JtLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcG9wdXBXaXRoUHJvZmlsZUltYWdlRm9ybS5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgICB9KTtcbn1cblxuXG5mdW5jdGlvbiBvcGVuUG9wdXBQcm9maWxlICgpIHtcbiAgZm9ybVZhbGlkYXRvcnMucG9wdXBGb3JtUHJvZmlsZS5kaXNhYmxlQnV0dG9uKCk7XG4gIGNvbnN0IGluZm9EYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgcHJvZmlsZU5hbWVJbnB1dC52YWx1ZSA9IGluZm9EYXRhLm5hbWU7XG4gIHByb2ZpbGVBYm91dElucHV0LnZhbHVlID0gaW5mb0RhdGEuaW5mbztcbiAgZm9ybVZhbGlkYXRvcnMucG9wdXBGb3JtUHJvZmlsZS5yZXNldEVycm9ycygpO1xuICBwb3B1cFdpdGhQcm9maWxlRm9ybS5vcGVuKCk7XG59XG5cblxuZnVuY3Rpb24gc3VibWl0SGFuZGxlclByb2ZpbGVGb3JtIChldnQsIHt1c2VyTmFtZTogbmFtZSwgYWJvdXRVc2VyOiBhYm91dH0pIHtcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIHBvcHVwV2l0aFByb2ZpbGVGb3JtLnJlbmRlckxvYWRpbmcodHJ1ZSk7XG4gIGFwaS5jaGFuZ2VVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pXG4gICAgLnRoZW4oKHsgbmFtZSwgYWJvdXQgfSkgPT4ge1xuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KTtcbiAgICAgIHBvcHVwV2l0aFByb2ZpbGVGb3JtLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcG9wdXBXaXRoUHJvZmlsZUZvcm0ucmVuZGVyTG9hZGluZyhmYWxzZSk7XG4gICAgfSk7XG59XG5cblxuZnVuY3Rpb24gcmVuZGVyZXIgKGNhcmREYXRhKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7XG4gICAgY2FyZERhdGEsXG4gICAgdXNlcklkOiB1c2VySW5mby5nZXRVc2VySWQoKSxcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXG4gICAgaGFuZGxlTGlrZUNsaWNrLFxuICAgIGhhbmRsZURlbGV0ZUljb25DbGlja1xuICB9LCAnLmNhcmQtdGVtcGxhdGUnKTtcbiAgcmV0dXJuIGNhcmQ7XG59XG5cblxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlSWNvbkNsaWNrIChjYXJkRGF0YSkge1xuICBwb3B1cFdpdGhEZWxldGVDYXJkLm9wZW4oY2FyZERhdGEpO1xufVxuXG5cbmZ1bmN0aW9uIHN1Ym1pdEhhbmRsZXJEZWxldGVDYXJkIChldnQsIGNhcmREYXRhKSB7XG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICBhcGkuZGVsZXRlQ2FyZChjYXJkRGF0YS5jYXJkSWQpXG4gIC50aGVuKCgpID0+IHtcbiAgICBjYXJkRGF0YS5jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICBjYXJkRGF0YS5jYXJkRWxlbWVudCA9IG51bGw7XG4gICAgcG9wdXBXaXRoRGVsZXRlQ2FyZC5jbG9zZSgpO1xuICB9KVxuICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpO1xufVxuXG5cbmZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayAobmFtZSwgbGluaykge1xuICBwb3B1cFdpdGhJbWFnZS5vcGVuKG5hbWUsIGxpbmspO1xufVxuXG5cbmZ1bmN0aW9uIGhhbmRsZUxpa2VDbGljayAoY2FyZCwgaXNMaWtlKSB7XG4gIGNvbnN0IGNhcmRQcm9taXNlID0gaXNMaWtlID8gYXBpLnJlbW92ZUxpa2UoY2FyZC5jYXJkSWQpIDogYXBpLnNldExpa2UoY2FyZC5jYXJkSWQpO1xuICBjYXJkUHJvbWlzZS50aGVuKChjYXJkRGF0YSkgPT4ge1xuICAgIGNhcmQudXBkYXRlTGlrZShjYXJkRGF0YS5saWtlcyk7XG4gICAgfSlcbiAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpO1xufVxuXG5cbnBvcHVwV2l0aFByb2ZpbGVJbWFnZUZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnBvcHVwV2l0aFByb2ZpbGVGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cFdpdGhJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xucG9wdXBXaXRoRGVsZXRlQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5cblxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0SW5pdGlhbENhcmRzKCldKVxuICAudGhlbigoW3VzZXJEYXRhLCBpbml0aWFsQ2FyZHNdKSA9PiB7XG4gICAgdXNlckluZm8uc2V0VXNlckF2YXRhcih1c2VyRGF0YS5hdmF0YXIpO1xuICAgIHVzZXJJbmZvLnNldFVzZXJJZCh1c2VyRGF0YS5faWQpO1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcbiAgICAgIG5hbWU6IHVzZXJEYXRhLm5hbWUsXG4gICAgICBhYm91dDogdXNlckRhdGEuYWJvdXRcbiAgICB9KTtcblxuICAgIHJldHVybiBuZXcgU2VjdGlvbih7XG4gICAgICBpdGVtczogaW5pdGlhbENhcmRzLFxuICAgICAgcmVuZGVyZXJcbiAgICB9LCAnLmVsZW1lbnRzX193cmFwcGVyJyk7XG5cbiAgfSlcbiAgLnRoZW4oY2FyZHNMaXN0U2VjdGlvbiA9PiB7XG4gICAgY29uc3QgcG9wdXBXaXRoUGxhY2VGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF9wbGFjZScsIHN1Ym1pdEhhbmRsZXJQbGFjZUZvcm0pO1xuICAgIHBvcHVwV2l0aFBsYWNlRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgZnVuY3Rpb24gb3BlblBvcHVwUGxhY2UgKCkge1xuICAgICAgZm9ybVZhbGlkYXRvcnMucG9wdXBGb3JtUGxhY2UuZGlzYWJsZUJ1dHRvbigpO1xuICAgICAgZm9ybVZhbGlkYXRvcnMucG9wdXBGb3JtUGxhY2UucmVzZXRFcnJvcnMoKTtcbiAgICAgIHBvcHVwV2l0aFBsYWNlRm9ybS5vcGVuKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc3VibWl0SGFuZGxlclBsYWNlRm9ybSAoZXZ0LCB7cGxhY2VOYW1lOiBuYW1lLCBwbGFjZUltYWdlTGluazogbGlua30pIHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgcG9wdXBXaXRoUGxhY2VGb3JtLnJlbmRlckxvYWRpbmcodHJ1ZSk7XG4gICAgICBhcGkuYWRkQ2FyZCh7bmFtZSwgbGlua30pXG4gICAgICAgIC50aGVuKGNhcmREYXRhID0+IHtcbiAgICAgICAgICBjb25zdCBjYXJkID0gY2FyZHNMaXN0U2VjdGlvbi5yZW5kZXJlckl0ZW0oY2FyZERhdGEpO1xuICAgICAgICAgIGNhcmRzTGlzdFNlY3Rpb24uYWRkSXRlbShjYXJkLmNyZWF0ZUNhcmQoKSk7XG4gICAgICAgICAgcG9wdXBXaXRoUGxhY2VGb3JtLmNsb3NlKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSlcbiAgICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICAgIHBvcHVwV2l0aFBsYWNlRm9ybS5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgICAgICAgICBmb3JtVmFsaWRhdG9ycy5wb3B1cEZvcm1QbGFjZS5kaXNhYmxlQnV0dG9uKCk7XG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgY2FyZHNMaXN0U2VjdGlvbi5yZW5kZXJJbml0aWFsSXRlbXMoKS5mb3JFYWNoKGNhcmQgPT4ge1xuICAgICAgY2FyZHNMaXN0U2VjdGlvbi5hZGRJdGVtKGNhcmQuY3JlYXRlQ2FyZCgpKTtcbiAgICB9KTtcblxuICAgIHBsYWNlQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlblBvcHVwUGxhY2UpO1xuXG4gIH0pXG4gIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSk7XG5cblxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuUG9wdXBQcm9maWxlKTtcbnByb2ZpbGVJbWFnZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuUG9wdXBQcm9maWxlSW1hZ2UpO1xuXG5cbmZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gIGNvbnN0IGZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uU2V0dGluZ3MsIGZvcm1FbGVtZW50KTtcbiAgZm9ybVZhbGlkYXRvcnNbZm9ybUVsZW1lbnQubmFtZV0gPSBmb3JtVmFsaWRhdG9yO1xuICBmb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbn0pO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3RvciAob3B0aW9ucykge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XHJcbiAgfVxyXG5cclxuXHJcbiAgX2NoZWNrUHJvbWlzZShyZXMpIHtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9XHJcblxyXG4gIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgfVxyXG5cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH11c2Vycy9tZWAsIHtcclxuICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUHJvbWlzZSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgY2hhbmdlVXNlckluZm8oZGF0YSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9dXNlcnMvbWVgLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tQcm9taXNlKTtcclxuICB9XHJcblxyXG5cclxuICBjaGFuZ2VBdmF0YXIoZGF0YSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9dXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUHJvbWlzZSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9Y2FyZHNgLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Byb21pc2UpO1xyXG4gIH1cclxuXHJcblxyXG4gIHNldExpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH1jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnUFVUJyxcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUHJvbWlzZSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgcmVtb3ZlTGlrZShjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfWNhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcclxuICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tQcm9taXNlKTtcclxuICB9XHJcblxyXG5cclxuICBhZGRDYXJkKGRhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfWNhcmRzYCwge1xyXG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tQcm9taXNlKTtcclxuICB9XHJcblxyXG5cclxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9Y2FyZHMvJHtjYXJkSWR9YCwge1xyXG4gICAgICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Byb21pc2UpO1xyXG4gIH1cclxuXHJcbn1cclxuIl0sIm5hbWVzIjpbIkZvcm1WYWxpZGF0b3IiLCJ2YWxpZGF0aW9uU2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX21lc3NhZ2VFcnJvckNsYXNzIiwibWVzc2FnZUVycm9yQ2xhc3MiLCJfZm9ybUVsZW1lbnQiLCJfYnV0dG9uRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsImlkIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwidGV4dENvbnRlbnQiLCJmb3JFYWNoIiwiX2hpZGVJbnB1dEVycm9yIiwiYWRkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX3Nob3dJbnB1dEVycm9yIiwic29tZSIsInNldEF0dHJpYnV0ZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlQnV0dG9uIiwicmVtb3ZlQXR0cmlidXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJDYXJkIiwidGVtcGxhdGVTZWxlY3RvciIsImNhcmREYXRhIiwidXNlcklkIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwiaGFuZGxlRGVsZXRlSWNvbkNsaWNrIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRMaWtlcyIsImxpa2VzIiwiX293bmVySWQiLCJvd25lciIsIl9pZCIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUljb25DbGljayIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiY2FyZElkIiwiX3VzZXJJZCIsImZpbmQiLCJpdGVtIiwiaXNMaWtlIiwiX2NhcmRIZWFydCIsImNhcmRMaWtlcyIsIl9udW1iZXJPZkxpa2VzIiwibGVuZ3RoIiwiX2NhcmRMaWtlQ291bnRlciIsIl9oYXNNeUxpa2UiLCJfc2V0TGlrZSIsImNhcmRFbGVtZW50IiwiZG9jdW1lbnQiLCJjb250ZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJjbG9uZU5vZGUiLCJjYXJkUmVtb3ZlQnV0dG9uIiwiX2NhcmRUaXRsZSIsIl9jYXJkSW1hZ2UiLCJzcmMiLCJhbHQiLCJ1cGRhdGVMaWtlIiwiZXZ0IiwidGFyZ2V0IiwiY29udGFpbnMiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2luaXRpYWxJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJlbGVtZW50IiwicHJlcGVuZCIsInB1c2giLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsImNsb3NlIiwiUG9wdXBXaXRoSW1hZ2UiLCJfZW5sYXJnZWRJbWFnZSIsIl9pbWFnZVBvcHVwVGl0bGUiLCJQb3B1cFdpdGhGb3JtIiwic3VibWl0SGFuZGxlckZvcm0iLCJfc3VibWl0SGFuZGxlckZvcm0iLCJfc3VibWl0QnV0dG9uIiwiX2luaXRpYWxTdWJtaXRCdXR0b25UZXh0IiwiX2lucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsIl9nZXRJbnB1dFZhbHVlcyIsImlzTG9hZGluZyIsInJlc2V0IiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJpbmZvU2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9pbmZvRWxlbWVudCIsIl9hdmF0YXJFbGVtZW50IiwiaW5mbyIsImFib3V0IiwicHJvZmlsZSIsInByb2ZpbGVJbWFnZUVkaXRCdXR0b24iLCJwcm9maWxlRWRpdEJ1dHRvbiIsInBsYWNlQWRkQnV0dG9uIiwicHJvZmlsZUZvcm1FbGVtZW50IiwicHJvZmlsZU5hbWVJbnB1dCIsInByb2ZpbGVBYm91dElucHV0IiwiUG9wdXBXaXRoQ29uZmlybWF0aW9uIiwiX3N1Ym1pdEJ1dHRvbkVsZW1lbnQiLCJfY29uZmlybWF0aW9uRGF0YSIsImNvbmZpcm1hdGlvbkRhdGEiLCJhcGkiLCJBcGkiLCJvcHRpb25zIiwiX2Jhc2VVcmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwibWV0aG9kIiwidGhlbiIsIl9jaGVja1Byb21pc2UiLCJkYXRhIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhdXRob3JpemF0aW9uIiwidXNlckluZm8iLCJwb3B1cFdpdGhQcm9maWxlSW1hZ2VGb3JtIiwicHJvZmlsZUltYWdlTGluayIsInByZXZlbnREZWZhdWx0IiwicmVuZGVyTG9hZGluZyIsImNoYW5nZUF2YXRhciIsImF2YXRhciIsInNldFVzZXJBdmF0YXIiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJmaW5hbGx5IiwicG9wdXBXaXRoUHJvZmlsZUZvcm0iLCJ1c2VyTmFtZSIsImFib3V0VXNlciIsImNoYW5nZVVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJwb3B1cFdpdGhJbWFnZSIsInBvcHVwV2l0aERlbGV0ZUNhcmQiLCJkZWxldGVDYXJkIiwiZm9ybUxpc3QiLCJmb3JtVmFsaWRhdG9ycyIsImdldFVzZXJJZCIsIm9wZW4iLCJjYXJkIiwicmVtb3ZlTGlrZSIsInNldExpa2UiLCJzZXRFdmVudExpc3RlbmVycyIsImFsbCIsImdldFVzZXJJbmZvIiwiZ2V0SW5pdGlhbENhcmRzIiwidXNlckRhdGEiLCJpbml0aWFsQ2FyZHMiLCJzZXRVc2VySWQiLCJjYXJkc0xpc3RTZWN0aW9uIiwicG9wdXBXaXRoUGxhY2VGb3JtIiwicGxhY2VOYW1lIiwicGxhY2VJbWFnZUxpbmsiLCJhZGRDYXJkIiwicmVuZGVyZXJJdGVtIiwiYWRkSXRlbSIsImNyZWF0ZUNhcmQiLCJwb3B1cEZvcm1QbGFjZSIsInJlbmRlckluaXRpYWxJdGVtcyIsInJlc2V0RXJyb3JzIiwicG9wdXBGb3JtUHJvZmlsZSIsImluZm9EYXRhIiwicG9wdXBGb3JtUHJvZmlsZUltYWdlIiwiZm9ybVZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9