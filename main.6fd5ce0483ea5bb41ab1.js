!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._messageErrorClass=e.messageErrorClass,this._formElement=n,this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector))}var n,r;return n=t,(r=[{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.classList.remove(this._messageErrorClass),t.textContent=""}},{key:"resetErrors",value:function(){var e=this;this._inputList.forEach((function(t){e._hideInputError(t)}))}},{key:"_showInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._messageErrorClass)}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"disableButton",value:function(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.setAttribute("disabled","true")}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this.disableButton():(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.removeAttribute("disabled"))}},{key:"enableValidation",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){var r=t.cardData,o=t.userId,i=t.handleCardClick,a=t.handleLikeClick,c=t.handleDeleteIconClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=r.name,this._link=r.link,this._cardLikes=r.likes,this._ownerId=r.owner._id,this._handleCardClick=i,this._handleLikeClick=a,this._handleDeleteIconClick=c,this._templateSelector=n,this.cardId=r._id,this._userId=o}var t,r;return t=e,(r=[{key:"_hasMyLike",value:function(){var e=this;return this._cardLikes.find((function(t){return t._id==e._userId}))}},{key:"_setLike",value:function(e){e?this._cardHeart.classList.add("card__heart_active"):this._cardHeart.classList.remove("card__heart_active")}},{key:"updateLike",value:function(e){this._cardLikes=e,this._numberOfLikes=e.length,this._cardLikeCounter.textContent=this._numberOfLikes,this._hasMyLike()?this._setLike(!0):this._setLike(!1)}},{key:"createCard",value:function(){var e=this;this.cardElement=document.querySelector(this._templateSelector).content.firstElementChild.cloneNode(!0);var t=this.cardElement.querySelector(".card__remove-button");return this._cardTitle=this.cardElement.querySelector(".card__title"),this._cardImage=this.cardElement.querySelector(".card__image"),this._cardHeart=this.cardElement.querySelector(".card__heart"),this._cardLikeCounter=this.cardElement.querySelector(".card__like-counter"),this._cardTitle.textContent=this._name,this._cardImage.src=this._link,this._cardImage.alt=this._name,this.updateLike(this._cardLikes),this._ownerId==this._userId?t.addEventListener("click",(function(){return e._handleDeleteIconClick(e)})):t.remove(),this._cardImage.addEventListener("click",(function(){return e._handleCardClick(e._name,e._link)})),this._cardHeart.addEventListener("click",(function(t){e._handleLikeClick(e,t.target.classList.contains("card__heart_active"))})),this.cardElement}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initialItems=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"rendererItem",value:function(e){return this._renderer(e)}},{key:"renderInitialItems",value:function(){var e=this,t=[];return this._initialItems.forEach((function(n){return t.push(e._renderer(n))})),t}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupSelector=t,this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){document.removeEventListener("keydown",this._handleEscClose),this._popupElement.classList.remove("popup_opened")}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("click",(function(t){t.target.classList.contains("popup__close-button")&&e.close()})),this._popupElement.addEventListener("mousedown",(function(t){t.target.classList.contains("popup")&&e.close()}))}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=f(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},l.apply(this,arguments)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function h(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(r);if(o){var n=d(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._enlargedImage=t._popupElement.querySelector(".popup__enlarged-image"),t._imagePopupTitle=t._popupElement.querySelector(".popup__title_type_image"),t}return t=a,(n=[{key:"open",value:function(e,t){this._enlargedImage.src=t,this._enlargedImage.alt=e,this._imagePopupTitle.textContent=e,l(d(a.prototype),"open",this).call(this)}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(c);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=v(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},b.apply(this,arguments)}function v(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function E(e,t){return E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},E(e,t)}function k(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(r);if(o){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return k(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._submitHandlerForm=t,n._inputList=Array.from(n._popupElement.querySelectorAll(".popup__input")),n._formElement=n._popupElement.querySelector(".popup__form"),n._submitButton=n._formElement.querySelector(".popup__submit-button"),n._initialSubmitButtonText=n._submitButton.textContent,n}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputValues={},this._inputList.forEach((function(t){return e._inputValues[t.name]=t.value})),this._inputValues}},{key:"setEventListeners",value:function(){var e=this;b(g(a.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){e._submitHandlerForm(t,e._getInputValues())}))}},{key:"renderLoading",value:function(){this._submitButton.textContent="Сохранение..."}},{key:"close",value:function(){this._formElement.reset(),this._submitButton.textContent=this._initialSubmitButtonText,b(g(a.prototype),"close",this).call(this)}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(c);function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L=function(){function e(t){var n=t.nameSelector,r=t.infoSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameElement=document.querySelector(n),this._infoElement=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserId",value:function(){return this._userId}},{key:"setUserId",value:function(e){this._userId=e}},{key:"getUserInfo",value:function(){return{name:this._nameElement.textContent,info:this._infoElement.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;this._nameElement.textContent=t,this._infoElement.textContent=n}}])&&S(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),C={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__submit-button",inactiveButtonClass:"popup__submit-button_disabled",inputErrorClass:"popup__input_type_error",messageErrorClass:"popup__error-message_visible"},O=document.querySelector(".profile"),I=O.querySelector(".profile__image"),P=O.querySelector(".profile__image-edit-button"),j=O.querySelector(".profile__edit-button"),B=O.querySelector(".profile__add-button"),q=document.querySelector(".popup_profile").querySelector(".popup__form"),T=q.querySelector(".popup__input_field_name-profile"),R=q.querySelector(".popup__input_field_about-profile");function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(){return D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=A(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},D.apply(this,arguments)}function A(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=V(e)););return e}function F(e,t){return F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},F(e,t)}function H(e,t){if(t&&("object"===U(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=V(r);if(o){var n=V(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return H(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._submitHandlerForm=t,n._submitButtonElement=n._popupElement.querySelector(".popup__submit-button"),n}return t=a,(n=[{key:"setEventListeners",value:function(){var e=this;this._submitButtonElement.addEventListener("click",(function(t){e._submitHandlerForm(t,e._confirmationData)})),D(V(a.prototype),"setEventListeners",this).call(this)}},{key:"open",value:function(e){D(V(a.prototype),"open",this).call(this),this._confirmationData=e}}])&&x(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(c);function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var M=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers}var t,n;return t=e,(n=[{key:"_checkPromise",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"users/me"),{method:"GET",headers:this._headers}).then(this._checkPromise)}},{key:"changeUserInfo",value:function(e){return fetch("".concat(this._baseUrl,"users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._checkPromise)}},{key:"changeAvatar",value:function(e){return fetch("".concat(this._baseUrl,"users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._checkPromise)}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"cards"),{method:"GET",headers:this._headers}).then(this._checkPromise)}},{key:"setLike",value:function(e){return fetch("".concat(this._baseUrl,"cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then(this._checkPromise)}},{key:"removeLike",value:function(e){return fetch("".concat(this._baseUrl,"cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then(this._checkPromise)}},{key:"addCard",value:function(e){return fetch("".concat(this._baseUrl,"cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._checkPromise)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkPromise)}}])&&J(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-41/",headers:{authorization:"7a2dc15d-d1bf-4fc7-a20c-343b3e4fd575","Content-Type":"application/json"}}),G=new L({nameSelector:".profile__name",infoSelector:".profile__info"}),z=new w(".popup_image-profile",(function(e,t){var n=t.profileImageLink;e.preventDefault(),z.renderLoading(),M.changeAvatar({avatar:n}).then((function(e){I.src=e.avatar})).catch((function(e){return console.log(e)})).finally((function(){z.close()}))})),K=new w(".popup_profile",(function(e,t){var n=t.userName,r=t.aboutUser;e.preventDefault(),K.renderLoading(),M.changeUserInfo({name:n,about:r}).then((function(e){var t=e.name,n=e.about;return G.setUserInfo({name:t,about:n})})).catch((function(e){return console.log(e)})).finally((function(){K.close()}))})),Q=new _(".popup_image"),W=new N(".popup_confirmation",(function(e,t){e.preventDefault(),M.deleteCard(t.cardId).then((function(){t.cardElement.remove(),t.cardElement=null})).catch((function(e){return console.log(e)})).finally((function(){return W.close()}))})),X=Array.from(document.querySelectorAll(C.formSelector)),Y={};function Z(e){return new r({cardData:e,userId:G.getUserId(),handleCardClick:ee,handleLikeClick:te,handleDeleteIconClick:$},".card-template")}function $(e){W.open(e)}function ee(e,t){Q.open(e,t)}function te(e,t){(t?M.removeLike(e.cardId):M.setLike(e.cardId)).then((function(t){e.updateLike(t.likes)})).catch((function(e){return console.log(e)}))}z.setEventListeners(),K.setEventListeners(),Q.setEventListeners(),W.setEventListeners(),M.getUserInfo().then((function(e){I.src=e.avatar,G.setUserId(e._id),G.setUserInfo({name:e.name,about:e.about})})).then((function(){return M.getInitialCards()})).then((function(e){return new i({items:e,renderer:Z},".elements__wrapper")})).then((function(e){var t=new w(".popup_place",(function(n,r){var o=r.placeName,i=r.placeImageLink;n.preventDefault(),t.renderLoading(),M.addCard({name:o,link:i}).then((function(t){var n=e.rendererItem(t);e.addItem(n.createCard())})).catch((function(e){return console.log(e)})).finally((function(){t.close(),Y.popupFormPlace.disableButton()}))}));t.setEventListeners(),e.renderInitialItems().forEach((function(t){e.addItem(t.createCard())})),B.addEventListener("click",(function(){Y.popupFormPlace.disableButton(),Y.popupFormPlace.resetErrors(),t.open()}))})).catch((function(e){return console.log(e)})),j.addEventListener("click",(function(){Y.popupFormProfile.disableButton();var e=G.getUserInfo();T.value=e.name,R.value=e.info,Y.popupFormProfile.resetErrors(),K.open()})),P.addEventListener("click",(function(){Y.popupFormProfileImage.disableButton(),Y.popupFormProfileImage.resetErrors(),z.open()})),X.forEach((function(e){var n=new t(C,e);Y[e.name]=n,n.enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFdBQ0UrSSxFQUFlc0IsaUJBQWlCdkssZ0JBQ2hDLElBQU13SyxFQUFXNUMsRUFBUzRCLGNBQzFCeEQsRUFBaUJoQixNQUFRd0YsRUFBUzNKLEtBQ2xDb0YsRUFBa0JqQixNQUFRd0YsRUFBU2hGLEtBQ25DeUQsRUFBZXNCLGlCQUFpQkQsY0FDaEM5QixFQUFxQlcsVUFzSHZCdkQsRUFBdUIxRixpQkFBaUIsU0FqSnhDLFdBQ0UrSSxFQUFld0Isc0JBQXNCekssZ0JBQ3JDaUosRUFBZXdCLHNCQUFzQkgsY0FDckN6QyxFQUEwQnNCLFVBaUo1QkgsRUFBUzFKLFNBQVEsU0FBQzNCLEdBQ2hCLElBQU0rTSxFQUFnQixJQUFJak4sRUFBY0MsRUFBb0JDLEdBQzVEc0wsRUFBZXRMLEVBQVlrRCxNQUFRNkosRUFDbkNBLEVBQWNDLHNCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL3ZhbGlkYXRpb25TZXR0aW5ncy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IodmFsaWRhdGlvblNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gdmFsaWRhdGlvblNldHRpbmdzLmZvcm1TZWxlY3RvcjtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSB2YWxpZGF0aW9uU2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gdmFsaWRhdGlvblNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHZhbGlkYXRpb25TZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzO1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gdmFsaWRhdGlvblNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX21lc3NhZ2VFcnJvckNsYXNzID0gdmFsaWRhdGlvblNldHRpbmdzLm1lc3NhZ2VFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX21lc3NhZ2VFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xyXG4gIH1cclxuXHJcblxyXG4gIHJlc2V0RXJyb3JzKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX21lc3NhZ2VFcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICBfaGFzSW52YWxpZElucHV0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG5cclxuICBkaXNhYmxlQnV0dG9uICgpIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICd0cnVlJyk7XHJcbiAgfVxyXG5cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XHJcbiAgICAgIHRoaXMuZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcclxuICAgIH1cclxuICB9XHJcblxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHtjYXJkRGF0YSwgdXNlcklkLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZUxpa2VDbGljaywgaGFuZGxlRGVsZXRlSWNvbkNsaWNrfSwgdGVtcGxhdGVTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fbmFtZSA9IGNhcmREYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gY2FyZERhdGEubGluaztcclxuICAgIHRoaXMuX2NhcmRMaWtlcyA9IGNhcmREYXRhLmxpa2VzO1xyXG4gICAgdGhpcy5fb3duZXJJZCA9IGNhcmREYXRhLm93bmVyLl9pZDtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUljb25DbGljayA9IGhhbmRsZURlbGV0ZUljb25DbGljaztcclxuICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xyXG4gICAgdGhpcy5jYXJkSWQgPSBjYXJkRGF0YS5faWQ7XHJcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XHJcblxyXG4gIH1cclxuXHJcbiAgX2hhc015TGlrZSgpIHtcclxuICAgIHJldHVybiB0aGlzLl9jYXJkTGlrZXMuZmluZChpdGVtID0+IGl0ZW0uX2lkID09IHRoaXMuX3VzZXJJZCk7XHJcbiAgfVxyXG5cclxuXHJcbiAgX3NldExpa2UgKGlzTGlrZSkge1xyXG4gICAgaWYgKGlzTGlrZSkge1xyXG4gICAgICB0aGlzLl9jYXJkSGVhcnQuY2xhc3NMaXN0LmFkZCgnY2FyZF9faGVhcnRfYWN0aXZlJyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9jYXJkSGVhcnQuY2xhc3NMaXN0LnJlbW92ZSgnY2FyZF9faGVhcnRfYWN0aXZlJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgdXBkYXRlTGlrZSAoY2FyZExpa2VzKSB7XHJcbiAgICB0aGlzLl9jYXJkTGlrZXMgPSBjYXJkTGlrZXM7XHJcbiAgICB0aGlzLl9udW1iZXJPZkxpa2VzID0gY2FyZExpa2VzLmxlbmd0aDtcclxuICAgIHRoaXMuX2NhcmRMaWtlQ291bnRlci50ZXh0Q29udGVudCA9IHRoaXMuX251bWJlck9mTGlrZXM7XHJcblxyXG4gICAgaWYgKHRoaXMuX2hhc015TGlrZSgpKSB7XHJcbiAgICAgIHRoaXMuX3NldExpa2UodHJ1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zZXRMaWtlKGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgfVxyXG5cclxuXHJcbiAgY3JlYXRlQ2FyZCAoKSB7XHJcbiAgICB0aGlzLmNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fdGVtcGxhdGVTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgIGNvbnN0IGNhcmRSZW1vdmVCdXR0b24gPSB0aGlzLmNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19yZW1vdmUtYnV0dG9uJyk7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGUgPSB0aGlzLmNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190aXRsZScpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKTtcclxuICAgIHRoaXMuX2NhcmRIZWFydCA9IHRoaXMuY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2hlYXJ0Jyk7XHJcbiAgICB0aGlzLl9jYXJkTGlrZUNvdW50ZXIgPSB0aGlzLmNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlLWNvdW50ZXInKTtcclxuICAgIHRoaXMuX2NhcmRUaXRsZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHRoaXMudXBkYXRlTGlrZSh0aGlzLl9jYXJkTGlrZXMpO1xyXG5cclxuICAgIGlmICh0aGlzLl9vd25lcklkID09IHRoaXMuX3VzZXJJZCkge1xyXG4gICAgICBjYXJkUmVtb3ZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlSWNvbkNsaWNrKHRoaXMpKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNhcmRSZW1vdmVCdXR0b24ucmVtb3ZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspKTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSGVhcnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayh0aGlzLCBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY2FyZF9faGVhcnRfYWN0aXZlJykpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3RvciAoe2l0ZW1zLCByZW5kZXJlcn0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pbml0aWFsSXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJlckl0ZW0oaXRlbSkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySW5pdGlhbEl0ZW1zKCkge1xyXG4gICAgY29uc3QgaXRlbXMgPSBbXTtcclxuICAgIHRoaXMuX2luaXRpYWxJdGVtcy5mb3JFYWNoKGl0ZW0gPT4gaXRlbXMucHVzaCh0aGlzLl9yZW5kZXJlcihpdGVtKSkpO1xyXG4gICAgcmV0dXJuIGl0ZW1zO1xyXG4gIH1cclxuXHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3RvciAocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IgPSBwb3B1cFNlbGVjdG9yO1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cblxuICBvcGVuICgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG5cbiAgY2xvc2UgKCkge1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xuICB9XG5cblxuICBfaGFuZGxlRXNjQ2xvc2UgKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cblxuICBzZXRFdmVudExpc3RlbmVycyAoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9fY2xvc2UtYnV0dG9uJykpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldnQpID0+IHtcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXAnKSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3RvciAocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2VubGFyZ2VkSW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19lbmxhcmdlZC1pbWFnZScpO1xuICAgIHRoaXMuX2ltYWdlUG9wdXBUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3RpdGxlX3R5cGVfaW1hZ2UnKTtcbiAgfVxuXG5cbiAgb3BlbiAobmFtZSwgbGluaykge1xuICAgIHRoaXMuX2VubGFyZ2VkSW1hZ2Uuc3JjID0gbGluaztcbiAgICB0aGlzLl9lbmxhcmdlZEltYWdlLmFsdCA9IG5hbWU7XG4gICAgdGhpcy5faW1hZ2VQb3B1cFRpdGxlLnRleHRDb250ZW50ID0gbmFtZTtcblxuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxuXG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IgKHBvcHVwU2VsZWN0b3IsIHN1Ym1pdEhhbmRsZXJGb3JtKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3N1Ym1pdEhhbmRsZXJGb3JtID0gc3VibWl0SGFuZGxlckZvcm07XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2lucHV0JykpO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3N1Ym1pdC1idXR0b24nKTtcclxuICAgIHRoaXMuX2luaXRpYWxTdWJtaXRCdXR0b25UZXh0ID0gdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50O1xyXG4gIH1cclxuXHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcyAoKSB7XHJcbiAgICB0aGlzLl9pbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB0aGlzLl9pbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlKTtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dFZhbHVlcztcclxuICB9XHJcblxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycyAoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICB0aGlzLl9zdWJtaXRIYW5kbGVyRm9ybShldnQsIHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZW5kZXJMb2FkaW5nICgpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLic7XHJcbiAgfVxyXG5cclxuICBjbG9zZSAoKSB7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGhpcy5faW5pdGlhbFN1Ym1pdEJ1dHRvblRleHQ7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gIH1cclxuXHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yICh7bmFtZVNlbGVjdG9yLCBpbmZvU2VsZWN0b3J9KSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2luZm9FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihpbmZvU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcblxyXG4gIGdldFVzZXJJZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl91c2VySWQ7XHJcbiAgfVxyXG5cclxuXHJcbiAgc2V0VXNlcklkKHVzZXJJZCkge1xyXG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xyXG4gIH1cclxuXHJcblxyXG4gIGdldFVzZXJJbmZvICgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgICBpbmZvOiB0aGlzLl9pbmZvRWxlbWVudC50ZXh0Q29udGVudFxyXG4gICAgfTtcclxuICB9XHJcblxyXG5cclxuICBzZXRVc2VySW5mbyAoe25hbWUsIGFib3V0fSkge1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5faW5mb0VsZW1lbnQudGV4dENvbnRlbnQgPSBhYm91dDtcclxuICB9XHJcblxyXG59XHJcbiIsImV4cG9ydCBjb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiAnLnBvcHVwX19mb3JtJyxcclxuICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dCcsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX3N1Ym1pdC1idXR0b24nLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fc3VibWl0LWJ1dHRvbl9kaXNhYmxlZCcsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2lucHV0X3R5cGVfZXJyb3InLFxyXG4gIG1lc3NhZ2VFcnJvckNsYXNzOiAncG9wdXBfX2Vycm9yLW1lc3NhZ2VfdmlzaWJsZSdcclxufTtcclxuIiwiY29uc3QgcHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlJyk7XHJcbmNvbnN0IHByb2ZpbGVJbWFnZSA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2ltYWdlJyk7XHJcbmNvbnN0IHByb2ZpbGVJbWFnZUVkaXRCdXR0b24gPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19pbWFnZS1lZGl0LWJ1dHRvbicpO1xyXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XHJcbmNvbnN0IHBsYWNlQWRkQnV0dG9uID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpO1xyXG5cclxuY29uc3QgcHJvZmlsZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3Byb2ZpbGUnKTtcclxuY29uc3QgcHJvZmlsZUZvcm1FbGVtZW50ID0gcHJvZmlsZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xyXG5jb25zdCBwcm9maWxlTmFtZUlucHV0ID0gcHJvZmlsZUZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfZmllbGRfbmFtZS1wcm9maWxlJyk7XHJcbmNvbnN0IHByb2ZpbGVBYm91dElucHV0ID0gcHJvZmlsZUZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfZmllbGRfYWJvdXQtcHJvZmlsZScpO1xyXG5cclxuXHJcbmV4cG9ydCB7IHByb2ZpbGVJbWFnZSwgcHJvZmlsZUltYWdlRWRpdEJ1dHRvbiwgcHJvZmlsZUVkaXRCdXR0b24sIHBsYWNlQWRkQnV0dG9uLCBwcm9maWxlTmFtZUlucHV0LCBwcm9maWxlQWJvdXRJbnB1dCB9O1xyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3RvciAocG9wdXBTZWxlY3Rvciwgc3VibWl0SGFuZGxlckZvcm0pIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fc3VibWl0SGFuZGxlckZvcm0gPSBzdWJtaXRIYW5kbGVyRm9ybTtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbkVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19zdWJtaXQtYnV0dG9uJyk7XHJcbiAgfVxyXG5cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMgKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgdGhpcy5fc3VibWl0SGFuZGxlckZvcm0oZXZ0LCB0aGlzLl9jb25maXJtYXRpb25EYXRhKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gIH1cclxuXHJcbiAgb3Blbihjb25maXJtYXRpb25EYXRhKSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB0aGlzLl9jb25maXJtYXRpb25EYXRhID0gY29uZmlybWF0aW9uRGF0YTtcclxuICB9XHJcblxyXG59XHJcbiIsImltcG9ydCAnLi9pbmRleC5jc3MnO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xyXG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcclxuaW1wb3J0IHsgdmFsaWRhdGlvblNldHRpbmdzIH0gZnJvbSAnLi4vdXRpbHMvdmFsaWRhdGlvblNldHRpbmdzLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgcHJvZmlsZUltYWdlLFxyXG4gIHByb2ZpbGVJbWFnZUVkaXRCdXR0b24sXHJcbiAgcHJvZmlsZUVkaXRCdXR0b24sXHJcbiAgcGxhY2VBZGRCdXR0b24sXHJcbiAgcHJvZmlsZU5hbWVJbnB1dCxcclxuICBwcm9maWxlQWJvdXRJbnB1dFxyXG59IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XHJcblxyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzJztcclxuaW1wb3J0IEFwaSBmcm9tICcuLi9jb21wb25lbnRzL0FwaS5qcyc7XHJcblxyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogJ2h0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNDEvJyxcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiAnN2EyZGMxNWQtZDFiZi00ZmM3LWEyMGMtMzQzYjNlNGZkNTc1JyxcclxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgfVxyXG59KTtcclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBuYW1lU2VsZWN0b3I6ICcucHJvZmlsZV9fbmFtZScsXHJcbiAgaW5mb1NlbGVjdG9yOiAnLnByb2ZpbGVfX2luZm8nXHJcbn0pO1xyXG5cclxuY29uc3QgcG9wdXBXaXRoUHJvZmlsZUltYWdlRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfaW1hZ2UtcHJvZmlsZScsIHN1Ym1pdEhhbmRsZXJQcm9maWxlSW1hZ2VGb3JtKTtcclxuY29uc3QgcG9wdXBXaXRoUHJvZmlsZUZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX3Byb2ZpbGUnLCBzdWJtaXRIYW5kbGVyUHJvZmlsZUZvcm0pO1xyXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnBvcHVwX2ltYWdlJyk7XHJcbmNvbnN0IHBvcHVwV2l0aERlbGV0ZUNhcmQgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKCcucG9wdXBfY29uZmlybWF0aW9uJywgc3VibWl0SGFuZGxlckRlbGV0ZUNhcmQpO1xyXG5cclxuY29uc3QgZm9ybUxpc3QgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodmFsaWRhdGlvblNldHRpbmdzLmZvcm1TZWxlY3RvcikpO1xyXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xyXG5cclxuXHJcbmZ1bmN0aW9uIG9wZW5Qb3B1cFByb2ZpbGVJbWFnZSAoKSB7XHJcbiAgZm9ybVZhbGlkYXRvcnMucG9wdXBGb3JtUHJvZmlsZUltYWdlLmRpc2FibGVCdXR0b24oKTtcclxuICBmb3JtVmFsaWRhdG9ycy5wb3B1cEZvcm1Qcm9maWxlSW1hZ2UucmVzZXRFcnJvcnMoKTtcclxuICBwb3B1cFdpdGhQcm9maWxlSW1hZ2VGb3JtLm9wZW4oKTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIHN1Ym1pdEhhbmRsZXJQcm9maWxlSW1hZ2VGb3JtIChldnQsIHtwcm9maWxlSW1hZ2VMaW5rfSkge1xyXG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIHBvcHVwV2l0aFByb2ZpbGVJbWFnZUZvcm0ucmVuZGVyTG9hZGluZygpO1xyXG4gIGFwaS5jaGFuZ2VBdmF0YXIoe2F2YXRhcjogcHJvZmlsZUltYWdlTGlua30pXHJcbiAgICAudGhlbihkYXRhID0+IHtcclxuICAgICAgcHJvZmlsZUltYWdlLnNyYyA9IGRhdGEuYXZhdGFyO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgcG9wdXBXaXRoUHJvZmlsZUltYWdlRm9ybS5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBvcGVuUG9wdXBQcm9maWxlICgpIHtcclxuICBmb3JtVmFsaWRhdG9ycy5wb3B1cEZvcm1Qcm9maWxlLmRpc2FibGVCdXR0b24oKTtcclxuICBjb25zdCBpbmZvRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgcHJvZmlsZU5hbWVJbnB1dC52YWx1ZSA9IGluZm9EYXRhLm5hbWU7XHJcbiAgcHJvZmlsZUFib3V0SW5wdXQudmFsdWUgPSBpbmZvRGF0YS5pbmZvO1xyXG4gIGZvcm1WYWxpZGF0b3JzLnBvcHVwRm9ybVByb2ZpbGUucmVzZXRFcnJvcnMoKTtcclxuICBwb3B1cFdpdGhQcm9maWxlRm9ybS5vcGVuKCk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBzdWJtaXRIYW5kbGVyUHJvZmlsZUZvcm0gKGV2dCwge3VzZXJOYW1lOiBuYW1lLCBhYm91dFVzZXI6IGFib3V0fSkge1xyXG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIHBvcHVwV2l0aFByb2ZpbGVGb3JtLnJlbmRlckxvYWRpbmcoKTtcclxuICBhcGkuY2hhbmdlVXNlckluZm8oeyBuYW1lLCBhYm91dCB9KVxyXG4gICAgLnRoZW4oKHsgbmFtZSwgYWJvdXQgfSkgPT4gdXNlckluZm8uc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSlcclxuICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgcG9wdXBXaXRoUHJvZmlsZUZvcm0uY2xvc2UoKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gcmVuZGVyZXIgKGNhcmREYXRhKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKHtcclxuICAgIGNhcmREYXRhLFxyXG4gICAgdXNlcklkOiB1c2VySW5mby5nZXRVc2VySWQoKSxcclxuICAgIGhhbmRsZUNhcmRDbGljayxcclxuICAgIGhhbmRsZUxpa2VDbGljayxcclxuICAgIGhhbmRsZURlbGV0ZUljb25DbGlja1xyXG4gIH0sICcuY2FyZC10ZW1wbGF0ZScpO1xyXG4gIHJldHVybiBjYXJkO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlSWNvbkNsaWNrIChjYXJkRGF0YSkge1xyXG4gIHBvcHVwV2l0aERlbGV0ZUNhcmQub3BlbihjYXJkRGF0YSk7XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiBzdWJtaXRIYW5kbGVyRGVsZXRlQ2FyZCAoZXZ0LCBjYXJkRGF0YSkge1xyXG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gIGFwaS5kZWxldGVDYXJkKGNhcmREYXRhLmNhcmRJZClcclxuICAudGhlbigoKSA9PiB7XHJcbiAgICBjYXJkRGF0YS5jYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICAgIGNhcmREYXRhLmNhcmRFbGVtZW50ID0gbnVsbDtcclxuICB9KVxyXG4gIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSlcclxuICAuZmluYWxseSgoKSA9PiBwb3B1cFdpdGhEZWxldGVDYXJkLmNsb3NlKCkpO1xyXG59XHJcblxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZENsaWNrIChuYW1lLCBsaW5rKSB7XHJcbiAgcG9wdXBXaXRoSW1hZ2Uub3BlbihuYW1lLCBsaW5rKTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUxpa2VDbGljayAoY2FyZCwgaXNMaWtlKSB7XHJcbiAgY29uc3QgY2FyZFByb21pc2UgPSBpc0xpa2UgPyBhcGkucmVtb3ZlTGlrZShjYXJkLmNhcmRJZCkgOiBhcGkuc2V0TGlrZShjYXJkLmNhcmRJZCk7XHJcbiAgY2FyZFByb21pc2UudGhlbigoY2FyZERhdGEpID0+IHtcclxuICAgIGNhcmQudXBkYXRlTGlrZShjYXJkRGF0YS5saWtlcyk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKTtcclxufVxyXG5cclxuXHJcbnBvcHVwV2l0aFByb2ZpbGVJbWFnZUZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBXaXRoUHJvZmlsZUZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxucG9wdXBXaXRoRGVsZXRlQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuXHJcbmFwaS5nZXRVc2VySW5mbygpXHJcbiAgLnRoZW4oZGF0YSA9PiB7XHJcbiAgICBwcm9maWxlSW1hZ2Uuc3JjID0gZGF0YS5hdmF0YXI7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySWQoZGF0YS5faWQpO1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oe1xyXG4gICAgICBuYW1lOiBkYXRhLm5hbWUsXHJcbiAgICAgIGFib3V0OiBkYXRhLmFib3V0XHJcbiAgICB9KTtcclxuICB9KVxyXG4gIC50aGVuKCgpID0+IGFwaS5nZXRJbml0aWFsQ2FyZHMoKSlcclxuICAudGhlbigoaW5pdGlhbENhcmRzKSA9PiB7XHJcbiAgICByZXR1cm4gbmV3IFNlY3Rpb24oe1xyXG4gICAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgICByZW5kZXJlclxyXG4gICAgfSwgJy5lbGVtZW50c19fd3JhcHBlcicpO1xyXG4gIH0pXHJcbiAgLnRoZW4oY2FyZHNMaXN0U2VjdGlvbiA9PiB7XHJcbiAgICBjb25zdCBwb3B1cFdpdGhQbGFjZUZvcm0gPSBuZXcgUG9wdXBXaXRoRm9ybSgnLnBvcHVwX3BsYWNlJywgc3VibWl0SGFuZGxlclBsYWNlRm9ybSk7XHJcbiAgICBwb3B1cFdpdGhQbGFjZUZvcm0uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbiAgICBmdW5jdGlvbiBvcGVuUG9wdXBQbGFjZSAoKSB7XHJcbiAgICAgIGZvcm1WYWxpZGF0b3JzLnBvcHVwRm9ybVBsYWNlLmRpc2FibGVCdXR0b24oKTtcclxuICAgICAgZm9ybVZhbGlkYXRvcnMucG9wdXBGb3JtUGxhY2UucmVzZXRFcnJvcnMoKTtcclxuICAgICAgcG9wdXBXaXRoUGxhY2VGb3JtLm9wZW4oKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzdWJtaXRIYW5kbGVyUGxhY2VGb3JtIChldnQsIHtwbGFjZU5hbWU6IG5hbWUsIHBsYWNlSW1hZ2VMaW5rOiBsaW5rfSkge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgcG9wdXBXaXRoUGxhY2VGb3JtLnJlbmRlckxvYWRpbmcoKTtcclxuICAgICAgYXBpLmFkZENhcmQoe25hbWUsIGxpbmt9KVxyXG4gICAgICAgIC50aGVuKGNhcmREYXRhID0+IHtcclxuICAgICAgICAgIGNvbnN0IGNhcmQgPSBjYXJkc0xpc3RTZWN0aW9uLnJlbmRlcmVySXRlbShjYXJkRGF0YSk7XHJcbiAgICAgICAgICBjYXJkc0xpc3RTZWN0aW9uLmFkZEl0ZW0oY2FyZC5jcmVhdGVDYXJkKCkpO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxyXG4gICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgIHBvcHVwV2l0aFBsYWNlRm9ybS5jbG9zZSgpO1xyXG4gICAgICAgICAgZm9ybVZhbGlkYXRvcnMucG9wdXBGb3JtUGxhY2UuZGlzYWJsZUJ1dHRvbigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBjYXJkc0xpc3RTZWN0aW9uLnJlbmRlckluaXRpYWxJdGVtcygpLmZvckVhY2goY2FyZCA9PiB7XHJcbiAgICAgIGNhcmRzTGlzdFNlY3Rpb24uYWRkSXRlbShjYXJkLmNyZWF0ZUNhcmQoKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBwbGFjZUFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5Qb3B1cFBsYWNlKTtcclxuXHJcbiAgfSlcclxuICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpO1xyXG5cclxuXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb3BlblBvcHVwUHJvZmlsZSk7XHJcbnByb2ZpbGVJbWFnZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvcGVuUG9wdXBQcm9maWxlSW1hZ2UpO1xyXG5cclxuXHJcbmZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XHJcbiAgY29uc3QgZm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgZm9ybUVsZW1lbnQpO1xyXG4gIGZvcm1WYWxpZGF0b3JzW2Zvcm1FbGVtZW50Lm5hbWVdID0gZm9ybVZhbGlkYXRvcjtcclxuICBmb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxufSk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IgKG9wdGlvbnMpIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBvcHRpb25zLmJhc2VVcmw7XHJcbiAgICB0aGlzLl9oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xyXG4gIH1cclxuXHJcblxyXG4gIF9jaGVja1Byb21pc2UocmVzKSB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG5cclxuICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xyXG4gIH1cclxuXHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9dXNlcnMvbWVgLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Byb21pc2UpO1xyXG4gIH1cclxuXHJcblxyXG4gIGNoYW5nZVVzZXJJbmZvKGRhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfXVzZXJzL21lYCwge1xyXG4gICAgICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUHJvbWlzZSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgY2hhbmdlQXZhdGFyKGRhdGEpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfXVzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Byb21pc2UpO1xyXG4gIH1cclxuXHJcblxyXG4gIGdldEluaXRpYWxDYXJkcygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfWNhcmRzYCwge1xyXG4gICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tQcm9taXNlKTtcclxuICB9XHJcblxyXG5cclxuICBzZXRMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9Y2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xyXG4gICAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Byb21pc2UpO1xyXG4gIH1cclxuXHJcblxyXG4gIHJlbW92ZUxpa2UoY2FyZElkKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH1jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XHJcbiAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUHJvbWlzZSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgYWRkQ2FyZChkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH1jYXJkc2AsIHtcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUHJvbWlzZSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfWNhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tQcm9taXNlKTtcclxuICB9XHJcblxyXG59XHJcbiJdLCJuYW1lcyI6WyJGb3JtVmFsaWRhdG9yIiwidmFsaWRhdGlvblNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJ0aGlzIiwiX2Zvcm1TZWxlY3RvciIsImZvcm1TZWxlY3RvciIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9tZXNzYWdlRXJyb3JDbGFzcyIsIm1lc3NhZ2VFcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiX2J1dHRvbkVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dEVsZW1lbnQiLCJlcnJvckVsZW1lbnQiLCJpZCIsImNsYXNzTGlzdCIsInJlbW92ZSIsInRleHRDb250ZW50IiwiZm9yRWFjaCIsIl9oaWRlSW5wdXRFcnJvciIsImFkZCIsInZhbGlkYXRpb25NZXNzYWdlIiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9zaG93SW5wdXRFcnJvciIsInNvbWUiLCJzZXRBdHRyaWJ1dGUiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZUJ1dHRvbiIsInJlbW92ZUF0dHJpYnV0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiQ2FyZCIsInRlbXBsYXRlU2VsZWN0b3IiLCJjYXJkRGF0YSIsInVzZXJJZCIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZUxpa2VDbGljayIsImhhbmRsZURlbGV0ZUljb25DbGljayIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkTGlrZXMiLCJsaWtlcyIsIl9vd25lcklkIiwib3duZXIiLCJfaWQiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZUxpa2VDbGljayIsIl9oYW5kbGVEZWxldGVJY29uQ2xpY2siLCJfdGVtcGxhdGVTZWxlY3RvciIsImNhcmRJZCIsIl91c2VySWQiLCJmaW5kIiwiaXRlbSIsImlzTGlrZSIsIl9jYXJkSGVhcnQiLCJjYXJkTGlrZXMiLCJfbnVtYmVyT2ZMaWtlcyIsImxlbmd0aCIsIl9jYXJkTGlrZUNvdW50ZXIiLCJfaGFzTXlMaWtlIiwiX3NldExpa2UiLCJjYXJkRWxlbWVudCIsImRvY3VtZW50IiwiY29udGVudCIsImZpcnN0RWxlbWVudENoaWxkIiwiY2xvbmVOb2RlIiwiY2FyZFJlbW92ZUJ1dHRvbiIsIl9jYXJkVGl0bGUiLCJfY2FyZEltYWdlIiwic3JjIiwiYWx0IiwidXBkYXRlTGlrZSIsImV2dCIsInRhcmdldCIsImNvbnRhaW5zIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9pbml0aWFsSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZWxlbWVudCIsInByZXBlbmQiLCJwdXNoIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJjbG9zZSIsIlBvcHVwV2l0aEltYWdlIiwiX2VubGFyZ2VkSW1hZ2UiLCJfaW1hZ2VQb3B1cFRpdGxlIiwiUG9wdXBXaXRoRm9ybSIsInN1Ym1pdEhhbmRsZXJGb3JtIiwiX3N1Ym1pdEhhbmRsZXJGb3JtIiwiX3N1Ym1pdEJ1dHRvbiIsIl9pbml0aWFsU3VibWl0QnV0dG9uVGV4dCIsIl9pbnB1dFZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsIlVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiaW5mb1NlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2luZm9FbGVtZW50IiwiaW5mbyIsImFib3V0IiwicHJvZmlsZSIsInByb2ZpbGVJbWFnZSIsInByb2ZpbGVJbWFnZUVkaXRCdXR0b24iLCJwcm9maWxlRWRpdEJ1dHRvbiIsInBsYWNlQWRkQnV0dG9uIiwicHJvZmlsZUZvcm1FbGVtZW50IiwicHJvZmlsZU5hbWVJbnB1dCIsInByb2ZpbGVBYm91dElucHV0IiwiUG9wdXBXaXRoQ29uZmlybWF0aW9uIiwiX3N1Ym1pdEJ1dHRvbkVsZW1lbnQiLCJfY29uZmlybWF0aW9uRGF0YSIsImNvbmZpcm1hdGlvbkRhdGEiLCJhcGkiLCJBcGkiLCJvcHRpb25zIiwiX2Jhc2VVcmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwibWV0aG9kIiwidGhlbiIsIl9jaGVja1Byb21pc2UiLCJkYXRhIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhdXRob3JpemF0aW9uIiwidXNlckluZm8iLCJwb3B1cFdpdGhQcm9maWxlSW1hZ2VGb3JtIiwicHJvZmlsZUltYWdlTGluayIsInByZXZlbnREZWZhdWx0IiwicmVuZGVyTG9hZGluZyIsImNoYW5nZUF2YXRhciIsImF2YXRhciIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImZpbmFsbHkiLCJwb3B1cFdpdGhQcm9maWxlRm9ybSIsInVzZXJOYW1lIiwiYWJvdXRVc2VyIiwiY2hhbmdlVXNlckluZm8iLCJzZXRVc2VySW5mbyIsInBvcHVwV2l0aEltYWdlIiwicG9wdXBXaXRoRGVsZXRlQ2FyZCIsImRlbGV0ZUNhcmQiLCJmb3JtTGlzdCIsImZvcm1WYWxpZGF0b3JzIiwiZ2V0VXNlcklkIiwib3BlbiIsImNhcmQiLCJyZW1vdmVMaWtlIiwic2V0TGlrZSIsInNldEV2ZW50TGlzdGVuZXJzIiwiZ2V0VXNlckluZm8iLCJzZXRVc2VySWQiLCJnZXRJbml0aWFsQ2FyZHMiLCJpbml0aWFsQ2FyZHMiLCJjYXJkc0xpc3RTZWN0aW9uIiwicG9wdXBXaXRoUGxhY2VGb3JtIiwicGxhY2VOYW1lIiwicGxhY2VJbWFnZUxpbmsiLCJhZGRDYXJkIiwicmVuZGVyZXJJdGVtIiwiYWRkSXRlbSIsImNyZWF0ZUNhcmQiLCJwb3B1cEZvcm1QbGFjZSIsInJlbmRlckluaXRpYWxJdGVtcyIsInJlc2V0RXJyb3JzIiwicG9wdXBGb3JtUHJvZmlsZSIsImluZm9EYXRhIiwicG9wdXBGb3JtUHJvZmlsZUltYWdlIiwiZm9ybVZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iXSwic291cmNlUm9vdCI6IiJ9